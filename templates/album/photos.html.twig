{% extends 'base.html.twig' %}

{% block title %}my Tv Time â†’ {{ 'Photos'|trans }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/album.scss') }}">
{% endblock %}

{% block body %}
    {{ include('_blocks/_menu.html.twig') }}
    <div class="container-fluid photos-page">
        <div class="toggler">{{ ux_icon('mdi:menu') }}</div>
        <script>
            document.querySelector('.photos-page .toggler').addEventListener('click', function () {
                document.querySelector('.photos-page .sidebar').classList.toggle('open');
            });
            document.addEventListener('click', function (event) {
                if (!event.target.closest('.photos-page .toggler') && !event.target.closest('.photos-page .sidebar')) {
                    document.querySelector('.photos-page .sidebar').classList.remove('open');
                    event.stopPropagation();
                }
            });
        </script>
        <div class="sidebar">
            <div class="menu">
                <div class="header">
                    <h2>{{ 'Albums'|trans }}</h2>
                    <div class="toggler">{{ ux_icon('mdi:chevron-down') }}</div>
                </div>
                <div class="wrapper">
                    {% for album in albums %}
                        {% set id = album.user.id %}
                        <a href="{{ path('app_album_show', {'id': album.id}) }}">
                            <div class="thumbnail">
                                {% if album.photos|length %}
                                    {% set n = album.photos|length %}
                                    {% set n = random(n-1) %}
                                    <img
                                            src="/albums/{{ id }}/thumbnail{{ album.photos[n].imagePath }}"
                                            alt="{{ album.description }}"
                                    >
                                {% else %}
                                    <div>{{ 'No photo'|trans }}</div>
                                {% endif %}
                            </div>
                            <div class="name">{{ album.name }}</div>
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="photos">
            <div class="menu">
                <h1>{{ 'Photos'|trans }}</h1>
            </div>
            <div class="wrapper">
                {% for photo in photos %}
                    {% set id = photo.user.id %}
                    <div class="photo" data-id="{{ photo.id }}">
                        {#                    <a href="{{ path('app_album_photo', {id: photo.id}) }}" title="{{ 'View photo'|trans }}"> #}
                        <img src="/albums/{{ id }}/thumbnail{{ photo.imagePath }}" alt="{{ 'Photo'|trans }}"
                             loading="lazy"
                             srcset="/albums/{{ id }}/mobile{{ photo.imagePath }} 360w, /albums/{{ id }}/576p{{ photo.imagePath }} 576w, /albums/{{ id }}/720p{{ photo.imagePath }} 720w">
                        {#                    </a> #}
                    </div>
                {% endfor %}
            </div>
        </div>
        <h2>{{ 'Last days'|trans }}</h2>
        <div class="last-days">
            <div class="wrapper">
                {% for album in albumsByDays %}
                    {% set id = album.user.id %}
                    <a href="{{ path('app_album_show', {'id': album.id}) }}">
                        <div class="album">
                            {% if album.photos|length %}
                                {% set n = album.photos|length %}
                                {% set n = random(n-1) %}
                                <img
                                        src="/albums/{{ id }}/mobile{{ album.photos[n].imagePath }}"
                                        alt="{{ album.description }}"
                                        srcset="/albums/{{ id }}/mobile{{ album.photos[n].imagePath }} 360w, /albums/{{ id }}/576p{{ album.photos[n].imagePath }} 576w, /albums/{{ id }}/720p{{ album.photos[n].imagePath }} 720w, /albums/{{ id }}/1080p{{ album.photos[n].imagePath }} 1080w"
                                >
                            {% else %}
                                <div>{{ 'No photo'|trans }}</div>
                            {% endif %}
                            <div class="name">{{ album.description }}</div>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
    <div id="svgs" style="display: none">
        <div class="svg" id="arrow-left"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  font-size="1.25em" height="16px" width="16px" aria-hidden="true"><path fill="currentColor" d="M20 11v2H8l5.5 5.5l-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5L8 11z"></path></svg></div>
        <div class="svg" id="arrow-right"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  font-size="1.25em" height="16px" width="16px" aria-hidden="true"><path fill="currentColor" d="M4 11v2h12l-5.5 5.5l1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5L16 11z"></path></svg></div>
        <div class="svg" id="xmark"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  font-size="1.25em" height="16px" width="16px" aria-hidden="true"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"></path></svg></div>
    </div>
    {% include '_blocks/_footer.html.twig' %}
{% endblock %}
