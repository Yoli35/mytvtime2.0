{% extends 'base.html.twig' %}

{% block title %}my Tv Time → {{ 'Updates'|trans }}{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/contact.scss') }}">
    <link rel="stylesheet" href="{{ asset('styles/user.scss') }}">
{% endblock %}

{% block body %}
    {% include('_blocks/_menu.html.twig') %}
    <div class="container-fluid user-profile-container"> {# ← light #}
        <div class="site-updates">
            <div class="toggle-theme">{{ ux_icon('mdi:sun-moon-stars') }}</div>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const toggleTheme = document.querySelector('.toggle-theme');
                    toggleTheme.addEventListener('click', function () {
                        document.querySelector(".container-fluid").classList.toggle('light');
                    });
                });
            </script>
            <div class="site-update glowing-border left">
                <div class="updates-title">
                    <h1>Mises à jour / Updates / {{ 'Updates'|trans(domain = 'messages', locale = 'ko') }}</h1>
                    <h4>myTvTime 2.0 : 18/09/2024</h4>
                </div>
            </div>
            <div class="site-update glowing-border right">
                <h2>30ᵉ mise à jour : 28/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor image file handling and remove debug dumps</div>
                        <div class="details">Commented out debug dump statements in AlbumController and ImageService. Updated ImageService to consistently use the basename with extension when moving uploaded files, improving file naming consistency.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:filmstrip-box') }} → Refactor movie card to make entire card clickable</div>
                        <div class="details">Moved the anchor tag to wrap the entire movie card, making the whole card clickable instead of just a part of it. Added a hover outline effect to the card for better visual feedback.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:filmstrip-box') }} → Improve movie page layout and update date formats</div>
                        <div class="details">Refactored movie index layout to use CSS grid for better responsiveness and adjusted breakpoints from 50rem to 52rem across multiple SCSS files. Updated movie card date displays to use 'relative_medium' format for improved readability. Also added movie count to the main page heading and made minor style enhancements for filter buttons and responsive design.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Attempt to resolve an error that does not occur in development mode</div>
                        <div class="details">Show an error flash message when a network is not found in SeriesController, including the network name and ID. Added the corresponding French translation for 'network.not_found' in messages.fr.yaml.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:map-outline') }} → Rename last locations route and template</div>
                        <div class="details">Renamed the route and controller method from 'last-locations' to 'last', and updated the template from 'last-creations.html.twig' to 'last.html.twig'. Also fixed a typo in the icon name from 'image-mutiple' to 'image-multiple' in the template.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Refactor user action controls and update styles</div>
                        <div class="details">Consolidated 'sizes', 'aspect-ratios', and 'edit-episode-infos' into a unified 'user-actions' class in both HTML and JS selectors. Updated SCSS to style the new structure, removed redundant classes, and improved selector specificity. Also added a null check for the filming locations button event listener.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:bug-outline') }} → The killer death bug who kills… javascript!</div>
                        <div class="details">It's like desactivate javascript</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Add override flag to alternate schedule handling</div>
                        <div class="details">Introduces an 'override' property to alternate schedule arrays in SeriesController and updates the Twig template to display alternate schedules only when the override flag is set. This change improves the accuracy of alternate schedule presentation and ensures only relevant schedules are shown.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:emoticon-cow') }} → Switch all icons to Material Design Icons (mdi)</div>
                        <div class="details">Replaced all FontAwesome, Iconoir, and other icon references with Material Design Icons (mdi) equivalents across JavaScript and Twig template files. This unifies the icon set used throughout the application for consistency and easier maintenance.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Improve album naming for recent days</div>
                        <div class="details">Album names for photos taken within the last week now use the day of the week instead of a relative date format. This enhances clarity for users viewing recent albums.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>29ᵉ mise à jour : 25/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Add sorting order to seriesToStart query</div>
                        <div class="details">Introduces a separate 'order' variable set to 'DESC' and updates the call to seriesToStart to accept both sort field and order. This prepares the code for future enhancements, such as allowing users to choose the sorting order.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:map-outline') }} → Refine map header styles and icon sizes</div>
                        <div class="details">Adjusted the series map header styles for improved layout and readability, including font sizes and spacing. Reduced the icon sizes in the numbers section from 32px to 24px for better visual balance.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:language-css3') }} → Update menu icons to use mdi icon set</div>
                        <div class="details">Replaced various icon references in the navigation menu with their corresponding Material Design Icons (mdi) equivalents. This change standardizes the icon set used in the menu for a more consistent appearance.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:map-outline') }} → Leaflet popup description background color corrected</div>
                        <div class="details"></div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor album grid cell class logic and UI checks</div>
                        <div class="details">Moved the album grid cell class calculation to a dedicated getCellClasses() method in AlbumController for better maintainability and reuse. Updated AlbumShow.js to add null checks for DOM elements and event listeners, improving robustness. The album edit button in the template is now only shown for albums with a valid ID. Minor CSS adjustment to grid row sizing.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>28ᵉ mise à jour : 24/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Improve album grid layout and photo styling</div>
                        <div class="details">Enhanced the album grid by adding new CSS classes for various grid spans and adjusted the logic in AlbumController to better handle cell class assignment for different photo counts. Updated photo and SVG styling for better appearance and responsiveness. Also removed or commented out debug dump statements in AlbumController and ImageService for cleaner logs.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor album photo grid and add photo button UI</div>
                        <div class="details">Updated the album photo grid to use a 4-column layout with improved grid spanning logic for photos, both in the backend (cellClasses) and frontend (JS and Twig). The add photo button is now positioned absolutely and always visible for albums, and a number badge is shown on each photo. Improved handling for albums with no photos, and removed unused/obsolete CSS and logic.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }}→ Add daily photo albums and improve album handling</div>
                        <div class="details">Introduces support for grouping photos by day as virtual albums, adds a new route and controller logic for date-based albums, and updates templates to handle both standard and date-based albums. Refactors album and photo array conversion, improves album form and photo addition UI, and fixes minor issues with date handling and EXIF extraction. Also updates translations and album entity to support new features.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }}→ Add EXIF extraction and display photo metadata in album</div>
                        <div class="details">This update extracts EXIF data (date, latitude, longitude) from uploaded photos and stores them in the database. The frontend now displays photo metadata (date, created/updated at) in the album view, and the UI for adding photos and empty album states has been improved. Various code and style adjustments were made to support these features.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }}→ Refactor album background animation and layout</div>
                        <div class="details">Replaces the single background image with a dual-layer background for smoother transitions in the album view. Updates AlbumShow.js to handle two background images and animate transitions. Refactors related SCSS for new background structure and improves layout responsiveness. Updates the album show template to use the new background markup.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }}→ Order filming locations by season and episode</div>
                        <div class="details">Added ORDER BY clause to SQL query in FilmingLocationRepository to sort results by season_number and episode_number. This ensures that filming locations are returned in chronological order.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }}→ Add sorting options to 'series to start' page</div>
                        <div class="details">Introduces UI controls and backend support for sorting the 'series to start' list by first air date or date added, in ascending or descending order. Updates styles, controller, repository, and templates to handle sorting, and adds relevant translation strings.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>27ᵉ mise à jour : 21/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Improve network handling and add French translations</div>
                        <div class="details">Refactored network processing in SeriesController to add or update networks as needed, with flash messages for added or updated networks. Added French translations for network addition and update notifications.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:bug-outline') }} → Display detailed exception info on error page</div>
                        <div class="details">Enhanced the error page to show exception message, code, and file/line details if available. Updated ErrorController to extract exception data from the request and pass it to the template. Added styling for exception details in app.scss.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Update air date for user episodes if missing</div>
                        <div class="details">Adds logic to set and save the air date for user episodes when it is missing but available from the episode data.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:search') }} → Refactor multi-search click handling and result clearing</div>
                        <div class="details">Improves event handling for multi-search results by refining click logic and focusing behavior. Also updates result clearing to remove individual list items instead of resetting innerHTML, and adds navigation on result selection.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Improve series card ranking display and vote formatting</div>
                        <div class="details">Refactors the series card ranking UI by moving the ranking index and average vote to overlay badges on the poster, with updated styles for better visibility. The average vote is now rounded to two decimal places in the controller for consistent formatting.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor album page layout and background structure</div>
                        <div class="details">Updated album.scss and show.html.twig to improve the album page layout. Moved the background image markup inside the .protection div, adjusted padding and height calculations, and enhanced photo hover effects for better UI consistency.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>26ᵉ mise à jour : 20/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Add series ranking by vote feature</div>
                        <div class="details">Introduces a new page to display user's series ranked by average episode vote. Adds a new controller action, repository method, menu entry, translations, and related templates and styles for the ranking view.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Fixes a bug related to episode voting on the series page</div>
                        <div class="details">Episode views are represented by a record in the ‘user_episode’ table. For an episode, there are as many records as there are views. Voting is only present on the first view record. Bug fixing: eliminate extra view records.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>25ᵉ mise à jour : 18/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">{{ ux_icon('mdi:language-css3') }} → Update media queries to use container query syntax</div>
                        <div class="details">Replaced max-width media queries with container query syntax (width <= 64rem and width <= 50rem) in series.scss. Also adjusted .series-show and .header styles for improved responsiveness on smaller screens.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:filmstrip-box') }} → Update responsive styles for movie pages</div>
                        <div class="details">Commented out the media query for widths above 576px and added a new media query for widths up to 50rem. The new styles adjust layout, poster sizing, and border radius for improved responsiveness on smaller screens.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor album page layout and improve responsiveness</div>
                        <div class="details">Reorganized the album page structure in show.html.twig for better separation of controls and improved accessibility. Updated SCSS styles for .album-page, layout buttons, and responsive breakpoints to enhance mobile and desktop experiences. Moved map height CSS variables to :root in map.scss for consistency. Adjusted layout controls to use icon buttons and improved their styling and grouping.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:tv') }} → Improve edit button visibility on episode hover</div>
                        <div class="details">Changed the .edit button to use opacity transitions instead of display toggling for smoother appearance on hover. Updated hover logic to show the edit button only when not editing, and removed commented-out legacy code.</div>
                    </li>
                    <li>
                        <div class="change">{{ ux_icon('mdi:image-album') }} → Refactor album view with animated background and layout logic</div>
                        <div class="details">Moved album layout switching and settings persistence from inline Twig script to AlbumShow.js, centralizing logic and improving maintainability. Added animated background image for grid layout, updated SCSS for new layout structure and responsive design, and restructured the album page HTML to use semantic elements and support the new background/protection overlays. Minor string formatting improvements and animation logic refactor in AlbumShow.js.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor user episode addition to prevent duplicates</div>
                        <div class="details">Updated the logic in addSeasonToUser and related methods to check for existing user episodes before adding new ones, preventing duplicate entries. Modified method signatures to pass userEpisodes where needed and improved episode addition efficiency by batching database flushes.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor map UI into reusable map-container component</div>
                        <div class="details">Introduced a new map.scss stylesheet and a reusable _map-container.html.twig partial to unify and modernize the map UI across album, series, and map pages. Updated all relevant templates to use the new component, removed redundant map-related styles from album.scss and series.scss, and improved toggler and thumbnail logic. This change centralizes map styling and markup, making future maintenance and enhancements easier.</div>
                    </li>
                    <li>
                        <div class="change">→ Set navbar opacity to always be 1</div>
                        <div class="details">Replaces dynamic opacity calculation with a constant value of 1 for the navbar. This change disables scroll-based opacity adjustments, likely for improved visibility or debugging.</div>
                    </li>
                    <li>
                        <div class="change">→ Add next/last episode tabs to series season view</div>
                        <div class="details">Enhanced the series season view with new tabs for last and next episodes, including episode details and images. Updated JavaScript and SCSS for tab behavior and styling. Controller now provides episode data and handles new episodes for user tracking. Added relevant translations for new UI elements.</div>
                    </li>
                    <li>
                        <div class="change">→ Add user vote graphs to series seasons</div>
                        <div class="details">Introduces a reusable Twig partial for displaying user vote graphs per season and integrates it into the series show and season views. Updates JavaScript and SCSS to support interactive display of user votes, and extends the SeriesController to provide user vote data to templates.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor album grid layout and improve album card UI</div>
                        <div class="details">Switched album listing from flex to CSS grid for better responsiveness and control. Adjusted album card styles: added aspect ratio, made info overlay appear on hover with smooth transition, and updated border radius. Improved responsive breakpoints for different screen sizes.</div>
                    </li>
                    <li>
                        <div class="change">→ Add filming locations map feature for series on season page</div>
                        <div class="details">Introduces a new API endpoint and frontend integration to display filming locations for a series. Adds a button to the season page that fetches and displays a map with filming locations using data from the backend. Updates styles and translations to support the new feature.</div>
                    </li>
                    <li>
                        <div class="change">→ Add progress bar for bulk image addition in series</div>
                        <div class="details">Enhanced the 'Add all available images' dialog for series to display poster and backdrop counts and a progress bar when adding many images. Updated the JavaScript to handle bulk image uploads with progress feedback, adjusted the controller to support per-image addition, improved dialog layout and styles, and updated French translations for new UI elements.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor movie viewed status and display view dates</div>
                        <div class="details">Changed UserMovie 'viewed' property from boolean to integer to track view count. Updated MovieController to store formatted view dates and ensure uniqueness. Modified frontend and styles to display multiple view dates and improved UI for marking as viewed.</div>
                    </li>
                    <li>
                        <div class="change">→ Enhance network details with homepage and headquarters</div>
                        <div class="details">Adds fetching and display of network headquarters and homepage from TMDB, updates SeriesController to refresh network data if older than 30 days, and improves UI to show external link icon for network homepage in series details.</div>
                    </li>
                    <li>
                        <div class="change">→ Add force update option to series admin panel</div>
                        <div class="details">Introduces a 'Force update' checkbox to the admin series updates UI, allowing updates to bypass the usual time check. Updates the backend to handle the force flag, improves user episode update logic, and enhances styling for new episodes and user badges. Also adds French translation for 'Force update'.</div>
                    </li>
                    <li>
                        <div class="change">→ Add user-specific new episode tracking in series updates</div>
                        <div class="details">Introduces logic to track and display new episode count added for each user in series updates. Updates the admin JS and SCSS to handle and style the new 'new_episodes' field, and adds a helper to render user info in HTML for update logs.</div>
                    </li>
                    <li>
                        <div class="change">→ Add image saving for series poster and backdrop updates</div>
                        <div class="details">Integrates ImageConfiguration and ImageService to save updated poster and backdrop images when their paths change during series updates. Ensures images are stored using the correct URLs and sizes.</div>
                    </li>
                    <li>
                        <div class="change">→ Add navigation and improve video category handling</div>
                        <div class="details">Introduces 'Back to my videos' and 'Back to my videos by category' navigation buttons on the video show page, with corresponding styles and translations. Refactors category sorting logic into a private method in VideoController and ensures category/page context is preserved in navigation. Enhances JS to manage video category selection and option disabling more robustly.</div>
                    </li>
                    <li>
                        <div class="change">→ Update Mapbox GL JS and related dependencies to v3.14.0</div>
                        <div class="details">Upgraded Mapbox GL JS and Mapbox GL Geocoder to v3.14.0 and v5.1.0 respectively across JS, PHP importmap, and Twig templates. Adjusted map initialization to support new features (pitch, bearing, show3dObjects) and improved SCSS selectors for pagination. Updated other JS and PHP dependencies to latest versions for compatibility.</div>
                    </li>
                    <li>
                        <div class="change">→ Enhance 'What to Watch Next' with TMDB similar series</div>
                        <div class="details">The 'What to Watch Next' feature now fetches similar series from TMDB if fewer than 20 recommendations are available, using the current series' TMDB ID and language. Frontend and backend were updated to pass and handle these parameters, and the UI was improved for better display. TMDBService now supports language selection for similar series queries.</div>
                    </li>
                    <li>
                        <div class="change">→ Add 'What to watch next' feature for series</div>
                        <div class="details">Introduces a new 'What to watch next?' button on the season page, allowing users to fetch and display recommended series cards via a new API endpoint. Includes supporting backend controller, frontend JS logic, styles, and translation updates.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>24ᵉ mise à jour : 06/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">→ Refactor movie details layout and improve responsiveness</div>
                        <div class="details">Reworked the movie details section by replacing the 'two-parts' wrapper with separate 'left' and 'right' columns for better structure and maintainability. Updated SCSS to improve responsive behavior, especially for mobile and tablet breakpoints, and adjusted HTML templates to match the new layout. This enhances
                            readability and flexibility for future UI changes.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Improve mobile navbar menu UX and styling</div>
                        <div class="details">Enhanced the mobile navigation menu by adding toggling functionality via JavaScript and updating SCSS styles for better layout, overflow handling, and responsive design. The changes improve accessibility, menu appearance, and user experience on smaller screens.</div>
                    </li>
                    <li>
                        <div class="change">→ Improve responsive styles and add navbar toggler</div>
                        <div class="details">Updated media queries to use rem units and adjusted breakpoints for better responsiveness across album, app, and video SCSS files. Refactored navigation bar to include a toggler button and improved mobile layout handling in _menu.html.twig. Enhanced UI consistency and usability on smaller screens.</div>
                    </li>
                    <li>
                        <div class="change">→ Add collapsible advanced search UI</div>
                        <div class="details">Introduces a folded state for the advanced search form, allowing users to collapse and expand the search interface using magnify and close icons. Updates related SCSS for styling the new UI states and adjusts font size for improved readability.</div>
                    </li>
                    <li>
                        <div class="change">→ Improve admin series updates summary styling</div>
                        <div class="details">Adjusted aspect-ratio spacing for poster and backdrop images. Enhanced layout and overflow handling for series updates summary, including detail fields and name widths for better readability and usability.</div>
                    </li>
                    <li>
                        <div class="change">→ Add photo editing dialog and backend support</div>
                        <div class="details">Introduces a new side panel dialog for editing photo metadata (caption, date, coordinates) in albums, with corresponding JavaScript logic for form handling and UI updates. Adds a backend endpoint in AlbumController for processing photo edits and updates the Album entity to use proper getters/setters for date range
                            properties. Refactors CSS and template structure to support the new dialog and improves maintainability by extracting form logic into dedicated methods.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Add album layout switcher and prev/next navigation</div>
                        <div class="details">Introduces grid/list layout switching for album photos with user settings persistence, and adds previous/next album navigation with improved styling. Updates AlbumController, AlbumRepository, and templates to support these features, and enhances translations and SCSS for the new UI elements.</div>
                    </li>
                    <li>
                        <div class="change">→ Add localized date range string to albums</div>
                        <div class="details">Introduces a dateRangeString property to the Album entity, generated and localized in AlbumController using TranslatorInterface. Updates the album index template to display the formatted date range for each album.</div>
                    </li>
                    <li>
                        <div class="change">→ Enhance diaporama with srcset support and UI improvements</div>
                        <div class="details">Added srcset handling in the Diaporama JavaScript to support responsive images. Updated SCSS for better diaporama layout, including full viewport sizing and improved thumbnail visibility on hover. Modified Album entity constructor for explicit initialization. Extended photo srcset in album template to include
                            original image size.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Improve album photo upload and display handling</div>
                        <div class="details">Added support for dynamic photo addition with responsive srcset paths after upload, and improved handling of photos without geolocation in the map. Updated AlbumController to return image paths on upload and pass srcset paths to the frontend. Adjusted album page and photo grid styles for better layout and
                            scrolling.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Add map style toggler and thumbnail list to album view</div>
                        <div class="details">Introduces a floating toggler button to show or hide the map style thumbnail list in the album view. Updates styles for positioning and transitions, adds a script for toggling the list, and enhances thumbnail markup with a data-title attribute.</div>
                    </li>
                    <li>
                        <div class="change">→ Add 'My albums' button to album page</div>
                        <div class="details">Introduced a new 'My albums' button in the album page tools section and added corresponding styles in album.scss. Also adjusted map controller height in the series-map section.</div>
                    </li>
                    <li>
                        <div class="change">→ Improve album editing and photo upload UX</div>
                        <div class="details">Refactored album modification to separate info and photo uploads, providing user feedback during the process. Added a summary UI for upload progress, improved error handling, and updated backend routes and logic to support these changes. Enhanced album thumbnail and date range display in the template, and added
                            fallback bounds for albums without geolocated photos.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Add album modification form and backend support</div>
                        <div class="details">Introduces a new form and UI for modifying album details and uploading additional photos. Updates AlbumController, Album entity, and ImageService to handle album updates and image processing. Refactors frontend JS and SCSS for the new modify-album dialog, and updates translations and templates accordingly.</div>
                    </li>
                    <li>
                        <div class="change">→ Add summary section for series updates in admin</div>
                        <div class="details">Introduces a summary display for series updates in the admin interface. Updates JavaScript logic to generate and append summary rows for items with updates, adds corresponding summary container in the Twig template, and adjusts styles to support the new layout and scrolling behavior.</div>
                    </li>
                    <li>
                        <div class="change">→ Add ROLE_USER access control to video routes</div>
                        <div class="details">Applied the IsGranted('ROLE_USER') attribute to the index and show actions in VideoController to restrict access to authenticated users.</div>
                    </li>
                    <li>
                        <div class="change">→ Add null checks for menu elements and improve safety</div>
                        <div class="details">Fixes a bug that prevented you from logging in.</div>
                        <div class="details">Added checks to ensure elements like multiSearchOptions and historyList exist before accessing their properties or methods. This prevents potential runtime errors when these elements are not present in the DOM.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>23ᵉ mise à jour : 01/08/2025</h2>
                <ul>
                    <li>
                        <div class="change">→ Add album show page with map and photo enhancements</div>
                        <div class="details">Implemented AlbumShow.js for album display logic, including diaporama and map integration. Updated AlbumController to provide album and photo data as arrays, and added date range calculation for albums. Enhanced Map.js to display photo markers. Updated album and series styles for improved layout and map popups.
                            Modified templates to support new album show features, including map, photo previews, and form improvements. Fixed repository save methods and added array conversion methods to Photo and Album entities.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Refactor album and photo display, add photo metadata</div>
                        <div class="details">Updated AlbumController to fetch user albums and their photos, and refactored album and photo display in templates for improved layout and metadata presentation. Added date, latitude, and longitude fields to Photo entity with corresponding getters/setters. Updated translations for new metadata labels.</div>
                    </li>
                    <li>
                        <div class="change">→ Add progress info to series updates in admin</div>
                        <div class="details">Displays progress, last update date, and duration for series updates in the admin panel. Updates backend to track update start/end times and calculate duration, with translation support for time units. Improves user feedback during batch update operations.</div>
                    </li>
                    <li>
                        <div class="change">→ Add album and photo entities with basic album UI</div>
                        <div class="details">Introduces Album and Photo entities, their repositories, and relations to User. Adds AlbumController with index and show actions, and new Twig templates for album listing and details. Updates styles and menu to support albums, and adds French translations for album-related UI.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>22ᵉ mise à jour : 31/07/2025</h2>
                <ul>
                    <li>
                        <div class="change">→ Add scroll-to-top/bottom controls to series updates</div>
                        <div class="details">Introduces 'go-to-top' and 'go-to-bottom' buttons for easier navigation in the admin series updates section. Refactors markup and styles to support these controls and updates the JS logic to handle scrolling. Also adds a 'since' field to update details for improved context on previous updates.</div>
                    </li>
                    <li>
                        <div class="change">→ Add view transition animations and refactor theme switching</div>
                        <div class="details">Introduces view transition animations in app.scss for smoother theme changes. Refactors Menu.js to use the View Transition API when available for theme switching, moving theme update logic to a new updateTheme method. Also improves code style and consistency in list item removal.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor series updates UI and image handling</div>
                        <div class="details">Improves the admin series updates interface by grouping update lines and details into separate divs for each series, and disables the update button during processing. Image URLs for posters and backdrops are now passed as low/high resolution pairs, and srcset attributes are used for responsive images. Removes
                            unused debug output and updates API/Controller to provide new image URL structure.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Enhance admin series updates with detailed change display</div>
                        <div class="details">Added detailed update display for series fields in the admin panel, including visual comparison for images and improved status handling. Updated backend to return field-level changes, image URLs, and more granular update statuses. Improved frontend and styles to support new update details and visual feedback.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Refactor image addition logic in SeriesController</div>
                        <div class="details">Introduced addSeriesImage() to encapsulate image creation, saving, and update logic. Replaced repeated code blocks with calls to this new method for posters, backdrops, and other image types, improving maintainability and reducing duplication.</div>
                    </li>
                    <li>
                        <div class="change">→ Handle null providerId in getProvider method</div>
                        <div class="details">Adds a check for null providerId in the getProvider method, returning a default provider array when providerId is not set. This prevents potential errors when providerId is missing.</div>
                    </li>
                    <li>
                        <div class="change">→ Add admin series updates check feature</div>
                        <div class="details">Introduces a new admin tool for checking series updates, including a new JS module, controller route, repository method, and UI components. Updates styles and translations to support the new feature and integrates it into the admin interface.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor vote graph layout and structure</div>
                        <div class="details">Reorganized the vote graph in both SCSS and Twig to wrap episode votes in a new .episode-votes container, updated flex direction to row-reverse, and improved styling for vote-average. This enhances the visual structure and maintainability of the vote graph component.</div>
                    </li>
                    <li>
                        <div class="change">→ Add average vote display for season episodes</div>
                        <div class="details">Introduces a vote average section in the season view, showing the mean user vote for episodes. Updates JavaScript to recalculate and display the average dynamically, adds related styles, and provides translation for 'No votes'.</div>
                    </li>
                    <li>
                        <div class="change">→ Multi search: introduce search options WIP</div>
                    </li>
                    <li>
                        <div class="change">→ Prevent closing multi-search options on click</div>
                        <div class="details">Updated the click event handler to avoid closing the multi-search options dropdown when it is clicked. This improves user experience by allowing interaction with the multi-search options without unintentionally closing the menu.</div>
                    </li>
                    <li>
                        <div class="change">→ Improve update list layout and add change details</div>
                        <div class="details">Enhanced the user update list styles to better handle items with change details, including new gap and alignment rules for .change and .details elements. Updated the updates.html.twig template to display detailed descriptions for each change in the update list, improving clarity and user experience.</div>
                    </li>
                    <li>
                        <div class="change">→ Add opacity and transition to custom stills panel</div>
                        <div class="details">Sets default opacity and transition for the custom stills panel and ensures the .custom-stills element is fully opaque. Improves visual feedback and animation when toggling panel visibility.</div>
                    </li>
                    <li>
                        <div class="change">→ Replace h2 with header in series templates</div>
                        <div class="details">Updated series-in-a-while, series-to-start, and up-coming-series templates to use instead of for section headers containing search input. Adjusted related SCSS for spacing to improve layout consistency.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>21ᵉ mise à jour : 20/07/2025</h2>
                <ul>
                    <li>
                        <div class="change">→ Update theme color meta tag on navbar color change</div>
                        <div class="details">Added methods to convert HSL to hex and update the theme-color meta tag when the navbar color changes, ensuring browser UI matches the selected navbar color.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor add location form rendering in SeriesController</div>
                        <div class="details">Changed the controller to pass form data as an array instead of rendered HTML to the template. Updated the template to include the form using the data array, improving separation of concerns and maintainability. Also, the cooperative gestures toggle is now only shown when locations exist.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor season overview layout and styles</div>
                        <div class="details">Updated the structure and styling of season overview sections in both SCSS and Twig templates. Introduced new 'body' containers, improved the display of localized and additional overviews, and enhanced tool visibility and layout for source and locale indicators. Also commented out the scroll-timeline JavaScript
                            import.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Improve episode list layout and hover effect</div>
                        <div class="details">Added transition to width for smoother resizing, adjusted gap and padding for episode wrappers, and modified .infos width on hover for better UI responsiveness on screen less than 1024px wide.</div>
                    </li>
                    <li>
                        <div class="change">→ Add season localized overview support</div>
                        <div class="details">Introduces retrieval and display of season-specific localized overviews in the SeriesController and template. Updates styling for overview sections and translation keys. Refactors variable names for clarity and consistency.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor movie provider display and logic</div>
                        <div class="details">Updated provider handling in MovieController to support dynamic country selection and separate flatrate, buy, and rent providers. Improved provider display in movie templates for better clarity and layout, and added new French translations for provider types.</div>
                    </li>
                    <li>
                        <div class="change">→ Update vote graph layout and conditional rendering</div>
                        <div class="details">Adjusted the vote graph styles for improved spacing and responsiveness in series.scss. Refactored season.html.twig to render the vote graph only if episodes have user votes, and simplified the width calculation for episode votes.</div>
                    </li>
                    <li>
                        <div class="change">→ Refactor episode vote graph layout and styles</div>
                        <div class="details">Updated the vote graph in season.html.twig to wrap each vote in an 'episode-vote' container and display the episode number. Refactored and improved related SCSS for better structure, alignment, and visual clarity of vote bars and episode numbers.</div>
                    </li>
                    <li>
                        <div class="change">→ Include crew in preferred names lookup</div>
                        <div class="details">Added crew member IDs to the list of people for preferred name resolution in the SeriesController. This ensures that preferred names are retrieved for cast, guest stars, and crew.</div>
                    </li>
                    <li>
                        <div class="change">→ Enhance 'known for' display and styling for people</div>
                        <div class="details">Improves the logic for generating the 'known for' list in PeopleController, including correct handling of user-added media and poster URLs. Updates the SCSS to visually highlight user-added posters and adjusts poster sizing and border radius. The Twig template now adds a CSS class for user-added items, enabling
                            the new styling.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Update provider selection UI and tooltip logic</div>
                        <div class="details">Adjusted SCSS to unify styles for .select-provider and .select-vote, ensuring consistent display and sizing. Updated the season.html.twig template to show the provider name as the tooltip when a provider is selected, and 'Choose a provider' otherwise.</div>
                    </li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>20ᵉ mise à jour : 14/07/2025</h2>
                <ul>
                    <li>
                        <div class="change">→ Series page: Scope .content styles to elements with .left child</div>
                        <div class="details">Updated the selector from .content to .content:has(.left) to ensure flex-direction: column only applies when a .left child is present. This prevents unintended styling of .content elements without a .left child.</div>
                    </li>
                    <li>
                        <div class="change">→ Season page: Add episode vote graph and stats to season view</div>
                        <div class="details">Introduces a visual vote graph for episodes in the season view, displaying user and average votes. Also adds a new episode-stats section to show runtime and vote averages, with corresponding style updates and JavaScript logic to update the graph dynamically.</div>
                    </li>
                    <li>
                        <div class="change">→ Season page: Update series.scss for vote select and button visibility</div>
                        <div class="details">Set .select-vote to use flex display for improved layout. Hide .vote-button when it contains an SVG by adding a :has(svg) selector.</div>
                    </li>
                    <li>
                        <div class="change">→ People page: Improve preferred name form layout and styling</div>
                        <div class="details">Set width: 100% on several elements in the preferred name form for better alignment and responsiveness. Wrapped name in a span in the Twig template to allow for improved styling and text overflow handling.</div>
                    </li>
                    <li>
                        <div class="change">→ Map: Last additions: Add map centering feature for locations in UI</div>
                        <div class="details">Introduces a new UI control allowing users to center the map on a specific location from the last creations list. Updates Map.js to handle clicks on the new control, fly to the selected location, and open its marker popup. Styles and markup are updated to support the new feature.</div>
                    </li>
                    <li>
                        <div class="change">→ Improve series by country display and localization</div>
                        <div class="details">Refactors series-by-country UI to use a header element, updates styles for better visual grouping, and enhances the display of localized series names. Adjusts repository and controller logic to separate and render localized names, and updates template includes and variable handling for consistency.</div>
                    </li>
                    <li>
                        <div class="change">→ Add source fields to filming location forms and entity</div>
                        <div class="details">Introduces 'source-name' and 'source-url' fields to the filming location form, updates the FilmingLocation entity and its constructor to store these values, and ensures they are handled throughout the SeriesController. Also adds related styling classes and updates the form field rendering to support custom
                            classes.
                        </div>
                    </li>
                    <li>
                        <div class="change">→ Video page: Add video sharing feature with UI and translations</div>
                        <div class="details">Introduces a share button on the video page, allowing users to copy the video link to the clipboard. Adds a new share route and controller method, a dedicated share template, related styles, and French and Korean translations for share-related messages.</div>
                    </li>
                    <li>
                        <div class="change">→ Handle auxclick events and fix SVGs in Menu.js</div>
                        <div class="details">Added an event listener for 'auxclick' to close menus and clear search results when a middle mouse button is used. Also removed redundant fill="currentColor" attributes from SVG icon strings and ensured data-id is set as a string.</div>
                    </li>
                    <li>→ Filming locations: radius added to coordinates</li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>19ᵉ mise à jour : 23/06/2025</h2>
                <ul>
                    <li>→ Image service: code factoring & Apple Maps mark up</li>
                    <li>→ People preferred name: new input field</li>
                    <li>→ Episode schedules: remaining / elapsed time</li>
                    <li>→ Sass: nested declarations have to placed after</li>
                    <li>→ Remove user series</li>
                    <li>→ Series crew with multiple jobs</li>
                    <li>→ Schedules: number of episodes by selected day taken in count</li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                <h2>18ᵉ mise à jour : 16/06/2025</h2>
                <ul>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Site updates pages</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Series schedules: first week: selected days, then one weekly</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Points of interest: categories (buildings, towers, monuments,...)</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Videos: categories (environment, climate change, politics,...)</li>
                    <li><span class="improvement">{{ ux_icon('mi:arrow-right-up') }}</span>→ Unified location form (filming locations & poi)</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Map: cooperative gestures option</li>
                    <li><span class="improvement">{{ ux_icon('mi:arrow-right-up') }}</span>→ Admin poi: add poi form</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Map - last adds: points of interest displayed</li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                <h2>17ᵉ mise à jour : 10/06/2025</h2>
                <ul>
                    <li><span class="fix">{{ ux_icon('mdi:auto-fix') }}</span>→ Season page: quick episode links fixed</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Admin: videos added<span class="wip">{{ ux_icon('tabler:progress') }}</span></li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Admin: points of interest added<span class="wip">{{ ux_icon('tabler:progress') }}</span></li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ User profile page: translation settings<span class="wip">{{ ux_icon('tabler:progress') }}</span></li>
                    <li><span class="improvement">{{ ux_icon('mdi:arrow-top-right') }}</span>→ Season page: paste an episode thumbnail → displays the actual image file (was the pasted image)</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ User Profile page: theme toggler</li>
                    <li><span class="feature">{{ ux_icon('mdi:feature-highlight') }}</span>→ Episode schedules: "Selected days" frequency</li>
                    <li><span class="improvement">{{ ux_icon('mdi:arrow-top-right') }}</span>→ Videos page: better display on small devices</li>
                    <li><span class="css">{{ ux_icon('mdi:language-css3') }}</span>→ css corrections here and there...</li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                16ᵉ mise à jour : 05/06/2025<br>
                <ul>
                    <li>→ Series crew css (no image profile)</li>
                    <li>→ Network & provider update command</li>
                    <li>→ Series network logos display fixed</li>
                    <li>→ Commands: Invokable Commands and Input Attributes - new in 7.3</li>
                    <li>→ Provider table removed</li>
                    <li>→ Mark / unmark episode as watched fixed</li>
                    <li>→ Twig Extension Attributes - new 7.3</li>
                    <li>→ Filming location images: Google Maps markup added</li>
                    <li>→ Filming location images: series name markup added</li>
                    <li>→ Series episode schedules: days of week → episode count by days of week</li>
                    <li>→ sass deprecation: @import → @use</li>
                    <li>→ Episode still: marked with "series name - SxxExx"</li>
                    <li>→ Admin: filming locations added</li>
                    <li>→ Map: ?fl=123 → goes directly to the location with series id=123</li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                15ᵉ mise à jour : 29/05/2025<br>
                <ul>
                    <li>→ Videos: sql optimizations, time to watch YT, pagination, categories</li>
                    <li>→ Symfony 7.3</li>
                    <li>→ Layout: footer outside the container</li>
                    <li>→ Movie search page (Menu movie)</li>
                    <li>→ Advanced search: country menu with flags</li>
                    <li>→ Video page: previous & next video</li>
                    <li>→ Error page</li>
                    <li>→ Advanced search: landscape orientation on iPad</li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                14ᵉ mise à jour : 25/05/2025<br>
                <ul>
                    <li>→ Advanced search: user series highlighted</li>
                    <li>→ People: responsiveness</li>
                    <li>→ Advanced search: filters display settings</li>
                    <li>→ Season page: cancel episode marked as viewed</li>
                    <li>→ The Movie Database: people names may need to be trim</li>
                </ul>
            </div>
            <div class="site-update glowing-border left">
                13ᵉ mise à jour : 23/05/2025<br>
                <ul>
                    <li>→ New video section (YouTube)</li>
                    <li>→ Series advanced search: new layout</li>
                    <li>→ Horizontal episode layout on xxl screen</li>
                    <li>→ Menu series history: new layout</li>
                    <li>→ New admin sections: series, movies, providers</li>
                    <li>→ Permanent main menu when window width >= 1920px</li>
                    <li>→ Season page: provider, device and vote can be canceled</li>
                    <li>→ Starred people: new layout (grid)</li>
                    <li>→ Series schedule "selected days" bug fixed</li>
                    <li>→ Series advanced search: persistent search settings</li>
                    <li>→ Season: first episode provider from watch links</li>
                    <li>→ Series advanced search: language, timezone & country added</li>
                    <li>→ Symfony UX (2.18.* → 2.* - 2.25.2)</li>
                    <li>→ And many more ...</li>
                </ul>
            </div>
            <div class="site-update glowing-border right">
                12ᵉ mise à jour : 11/05/2025<br>
                11ᵉ mise à jour : 08/05/2025<br>
                10ᵉ mise à jour : 23/04/2025<br>
                9ᵉ mise à jour : 19/04/2025<br>
                8ᵉ mise à jour : 18/04/2025<br>
                7ᵉ mise à jour : 16/04/2025<br>
                6ᵉ mise à jour : 09/04/2025<br>
                5ᵉ mise à jour : 08/04/2025<br>
                4ᵉ mise à jour : 07/04/2025<br>
                3ᵉ mise à jour : 05/04/2025<br>
                2ᵉ mise à jour : 04/04/2025<br>
                1ᵉ mise à jour : 25/09/2024<br>
            </div>
            <div class="site-update glowing-border left">
                Ouverture : 27/10/2022<br>
                <div class="list">
                    27ᵉ mise à jour : 11/06/2024<br>
                    26ᵉ mise à jour : 25/01/2024<br>
                    25ᵉ mise à jour : 18/12/2023<br>
                    24ᵉ mise à jour : 25/10/2023<br>
                    23ᵉ mise à jour : 13/10/2023<br>
                    22ᵉ mise à jour : 11/10/2023<br>
                    21ᵉ mise à jour : 04/10/2023<br>
                    20ᵉ mise à jour : 28/06/2023<br>
                    19ᵉ mise à jour : 15/05/2023<br>
                    18ᵉ mise à jour : 27/04/2023<br>
                    17ᵉ mise à jour : 16/03/2023<br>
                    16ᵉ mise à jour : 12/03/2023<br>
                    15ᵉ mise à jour : 19/02/2023<br>
                    14ᵉ mise à jour : 10/02/2023<br>
                    13ᵉ mise à jour : 23/01/2023<br>
                    12ᵉ mise à jour : 12/01/2023<br>
                    11ᵉ mise à jour : 7/01/2023<br>
                    10ᵉ mise à jour : 6/01/2023<br>
                    9ᵉ mise à jour : 6/01/2023<br>
                    8ᵉ mise à jour : 4/01/2023<br>
                    7ᵉ mise à jour : 31/12/2022<br>
                    6ᵉ mise à jour : 19/12/2022<br>
                    5ᵉ mise à jour : 14/12/2022<br>
                    4ᵉ mise à jour : 8/12/2022<br>
                    3ᵉ mise à jour : 6/12/2022<br>
                    2ᵉ mise à jour : 22/11/2022<br>
                    1ᵉ mise à jour : 29/10/2022<br>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

